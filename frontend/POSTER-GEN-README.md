# å‰ç«¯åŠŸèƒ½å®ç°å®Œæˆ ğŸ‰

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. **æµ·æŠ¥ç”ŸæˆåŠŸèƒ½** (`/poster-gen`)

#### é¡µé¢ç»“æ„
- âœ… å·¦ä¾§ï¼šç”Ÿæˆè®¾ç½®è¡¨å•
- âœ… å³ä¾§ï¼šå®æ—¶é¢„è§ˆå’Œç»“æœå±•ç¤º
- âœ… åº•éƒ¨ï¼šå†å²è®°å½•åˆ—è¡¨

#### æ ¸å¿ƒç»„ä»¶
- **ProviderSelector** - AIæœåŠ¡æä¾›å•†é€‰æ‹©å™¨
  - è‡ªåŠ¨åŠ è½½å¯ç”¨çš„Provideråˆ—è¡¨
  - æ”¯æŒæ‰‹åŠ¨é€‰æ‹©æˆ–è‡ªåŠ¨é€‰æ‹©ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

- **GenerateForm** - å›¾ç‰‡ç”Ÿæˆè¡¨å•
  - æç¤ºè¯è¾“å…¥ï¼ˆå¿…å¡«ï¼‰
  - è´Ÿé¢æç¤ºè¯ï¼ˆå¯é€‰ï¼‰
  - é«˜çº§é€‰é¡¹ï¼ˆå®½é«˜æ¯”ã€ç”Ÿæˆæ­¥æ•°ã€CFG Scaleï¼‰
  - å®æ—¶ç”ŸæˆçŠ¶æ€åé¦ˆ

- **ImagePreview** - å›¾ç‰‡é¢„è§ˆ
  - ç”Ÿæˆä¸­åŠ¨ç”»æç¤º
  - é”™è¯¯çŠ¶æ€æ˜¾ç¤º
  - ä¸‹è½½åŠŸèƒ½
  - æ–°æ ‡ç­¾é¡µæ‰“å¼€

- **GenerationHistory** - å†å²è®°å½•
  - æ˜¾ç¤ºæœ€è¿‘10æ¡ç”Ÿæˆè®°å½•
  - ç‚¹å‡»æŸ¥çœ‹å†å²å›¾ç‰‡
  - æ”¯æŒåŠ è½½æ›´å¤š

### 2. **Adminç®¡ç†åå°** (`/admin`)

#### é¡µé¢ç»“æ„
- âœ… ä¾§è¾¹æ å¯¼èˆª
- âœ… Provideré…ç½®ç®¡ç†
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆå ä½ï¼‰
- âœ… ç”Ÿæˆç»Ÿè®¡ï¼ˆå ä½ï¼‰

#### æ ¸å¿ƒåŠŸèƒ½
- **ProviderConfigList** - Provideré…ç½®åˆ—è¡¨
  - æŸ¥çœ‹æ‰€æœ‰é…ç½®
  - æ˜¾ç¤ºä¼˜å…ˆçº§ã€æ¨¡å‹IDã€æè¿°
  - é‡æ–°åŠ è½½é…ç½®ï¼ˆçƒ­æ›´æ–°ï¼‰
  - ç¼–è¾‘/æµ‹è¯•/ç¦ç”¨æŒ‰é’®ï¼ˆå¾…å®ç°ï¼‰

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
frontend/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ poster-gen/
â”‚   â”‚   â””â”€â”€ page.tsx                    # æµ·æŠ¥ç”Ÿæˆé¡µé¢
â”‚   â””â”€â”€ admin/
â”‚       â”œâ”€â”€ layout.tsx                  # Adminå¸ƒå±€
â”‚       â”œâ”€â”€ page.tsx                    # Adminé¦–é¡µï¼ˆé‡å®šå‘ï¼‰
â”‚       â”œâ”€â”€ providers/
â”‚       â”‚   â””â”€â”€ page.tsx                # Provideré…ç½®ç®¡ç†é¡µ
â”‚       â”œâ”€â”€ users/
â”‚       â”‚   â””â”€â”€ page.tsx                # ç”¨æˆ·ç®¡ç†é¡µï¼ˆå ä½ï¼‰
â”‚       â””â”€â”€ stats/
â”‚           â””â”€â”€ page.tsx                # ç»Ÿè®¡é¡µé¢ï¼ˆå ä½ï¼‰
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ poster-gen/                     # æµ·æŠ¥ç”Ÿæˆç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ProviderSelector.tsx       # Provideré€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ GenerateForm.tsx           # ç”Ÿæˆè¡¨å•
â”‚   â”‚   â”œâ”€â”€ ImagePreview.tsx           # å›¾ç‰‡é¢„è§ˆ
â”‚   â”‚   â””â”€â”€ GenerationHistory.tsx      # å†å²è®°å½•
â”‚   â””â”€â”€ admin/                          # Adminç»„ä»¶
â”‚       â”œâ”€â”€ AdminSidebar.tsx           # ä¾§è¾¹æ å¯¼èˆª
â”‚       â””â”€â”€ ProviderConfigList.tsx     # Provideråˆ—è¡¨
â”‚
â”œâ”€â”€ api/
â”‚   â””â”€â”€ image-gen.ts                   # å›¾åƒç”ŸæˆAPI
â”‚
â”œâ”€â”€ store/
â”‚   â””â”€â”€ imageGenAtom.ts                # JotaiçŠ¶æ€ç®¡ç†
â”‚
â””â”€â”€ type/
    â””â”€â”€ image-gen.ts                   # TypeScriptç±»å‹å®šä¹‰
```

---

## ğŸ”Œ API é›†æˆ

### APIå‡½æ•°ï¼ˆæ–°é£æ ¼ï¼‰

```typescript
// ç”Ÿæˆå›¾ç‰‡
generateImgApi(data: GenerateImageRequest)

// Inpainting
inpaintImgApi(data: InpaintImageRequest)

// è·å–å†å²
getHistoryImgApi(limit?: number, offset?: number)

// è·å–è¯¦æƒ…
getByIdImgApi(id: number)

// è·å–Provideråˆ—è¡¨
getProvidersImgApi()

// é‡æ–°åŠ è½½Provider
reloadProvidersImgApi()
```

### çŠ¶æ€ç®¡ç†ï¼ˆJotai Atomsï¼‰

```typescript
providersAtom              // Provideråˆ—è¡¨
selectedProviderIdAtom     // å½“å‰é€‰ä¸­çš„Provider ID
isGeneratingAtom          // æ˜¯å¦æ­£åœ¨ç”Ÿæˆ
currentGeneratedImageAtom // å½“å‰ç”Ÿæˆçš„å›¾ç‰‡
generationHistoryAtom     // å†å²è®°å½•
generationErrorAtom       // é”™è¯¯ä¿¡æ¯
```

---

## ğŸ¨ UIç»„ä»¶åº“

ä½¿ç”¨ **shadcn/ui** ç»„ä»¶ï¼š
- Button
- Card
- Label
- Input
- Separator

é£æ ¼ï¼šç°ä»£åŒ»ç¾å¥¢åé£æ ¼ï¼Œç«ç‘°é‡‘é…è‰²

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### 1. å¯åŠ¨å‰ç«¯
```bash
cd frontend
pnpm dev
```

### 2. è®¿é—®é¡µé¢
- æµ·æŠ¥ç”Ÿæˆï¼š`http://localhost:3000/poster-gen`
- Adminåå°ï¼š`http://localhost:3000/admin`

### 3. ä½¿ç”¨æ­¥éª¤

#### æµ·æŠ¥ç”Ÿæˆï¼š
1. é€‰æ‹©AIæœåŠ¡ï¼ˆæˆ–è‡ªåŠ¨é€‰æ‹©ï¼‰
2. è¾“å…¥æç¤ºè¯æè¿°
3. å¯é€‰ï¼šè¾“å…¥è´Ÿé¢æç¤ºè¯
4. å¯é€‰ï¼šè°ƒæ•´é«˜çº§å‚æ•°
5. ç‚¹å‡»"ç”Ÿæˆæµ·æŠ¥"
6. ç­‰å¾…30-60ç§’
7. æŸ¥çœ‹ç»“æœï¼Œæ”¯æŒä¸‹è½½

#### Adminç®¡ç†ï¼š
1. è®¿é—® `/admin/providers`
2. æŸ¥çœ‹ç°æœ‰é…ç½®
3. ç‚¹å‡»"é‡æ–°åŠ è½½é…ç½®"çƒ­æ›´æ–°
4. æŸ¥çœ‹ä¼˜å…ˆçº§å’ŒçŠ¶æ€

---

## ğŸ“ å¾…å®ç°åŠŸèƒ½

### Providerç®¡ç†
- [ ] æ·»åŠ Provideré…ç½®ï¼ˆéœ€è¦åç«¯APIï¼‰
- [ ] ç¼–è¾‘Provideré…ç½®
- [ ] æµ‹è¯•Providerè¿æ¥
- [ ] å¯ç”¨/ç¦ç”¨Provider
- [ ] åˆ é™¤Provideré…ç½®

### ç”¨æˆ·ç®¡ç†
- [ ] ç”¨æˆ·åˆ—è¡¨
- [ ] è§’è‰²æƒé™ç®¡ç†
- [ ] ä½¿ç”¨é…é¢è®¾ç½®

### ç»Ÿè®¡åŠŸèƒ½
- [ ] ç”Ÿæˆæ•°é‡ç»Ÿè®¡
- [ ] æˆæœ¬åˆ†æ
- [ ] Providerä½¿ç”¨ç‡
- [ ] ç”¨æˆ·ä½¿ç”¨è¶‹åŠ¿

### æµ·æŠ¥ç”Ÿæˆå¢å¼º
- [ ] é£æ ¼æ¨¡æ¿åº“
- [ ] æ‰¹é‡ç”Ÿæˆ
- [ ] LoRAæ¨¡å‹æ”¯æŒ
- [ ] Promptä¼˜åŒ–å»ºè®®

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. **å†å²è®°å½•å›¾ç‰‡URL**
   - å½“å‰ä½¿ç”¨ `file.key` ä½œä¸ºURL
   - éœ€è¦åç«¯æä¾›å®Œæ•´çš„é¢„ç­¾åURL

2. **APIé”™è¯¯å¤„ç†**
   - éœ€è¦ç»Ÿä¸€é”™è¯¯æ ¼å¼
   - æ·»åŠ é‡è¯•æœºåˆ¶

3. **è®¤è¯çŠ¶æ€**
   - æµ·æŠ¥ç”Ÿæˆé¡µé¢éœ€è¦æ·»åŠ ç™»å½•æ£€æŸ¥
   - Adminé¡µé¢éœ€è¦æƒé™éªŒè¯

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### Providerä¼˜å…ˆçº§è®¾ç½®
- Stability AIï¼šä¼˜å…ˆçº§ 100ï¼ˆæ¨èï¼‰
- OpenAI DALL-Eï¼šä¼˜å…ˆçº§ 50ï¼ˆå¤‡ç”¨ï¼‰
- é˜¿é‡Œäº‘ï¼šä¼˜å…ˆçº§ 30ï¼ˆå›½å†…ï¼‰

### æç¤ºè¯æŠ€å·§
- è¯¦ç»†æè¿°èƒ½å¾—åˆ°æ›´å¥½æ•ˆæœ
- ä½¿ç”¨"åŒ»ç¾"ã€"é«˜ç«¯"ã€"å¥¢å"ç­‰å…³é”®è¯
- è´Ÿé¢æç¤ºè¯é¿å…"æ¨¡ç³Š"ã€"ä½è´¨é‡"

### æ€§èƒ½ä¼˜åŒ–
- ç”Ÿæˆå†å²åªåŠ è½½10æ¡ï¼Œç‚¹å‡»"åŠ è½½æ›´å¤š"è·å–
- Provideråˆ—è¡¨ç¼“å­˜åœ¨çŠ¶æ€ä¸­ï¼Œå‡å°‘è¯·æ±‚

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- åç«¯APIæ–‡æ¡£ï¼š[backend/src/image-gen/README.md](../backend/src/image-gen/README.md)
- æ•°æ®åº“é…ç½®ï¼š[backend/src/image-gen/DATABASE-CONFIG.md](../backend/src/image-gen/DATABASE-CONFIG.md)
- Provideråˆå§‹åŒ–SQLï¼š[backend/src/image-gen/seed-providers.sql](../backend/src/image-gen/seed-providers.sql)
